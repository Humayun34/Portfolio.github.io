var EditVendorAppFallback={},Utils,Utils,Utils,Utils,Utils,Utils,Utils,Utils,Utils,Utils,EditOperations,EditOperations,EditOperations,EditOperations,Edit,Edit,Edit,Utils,Shared,Shared,Edit;
/*!
  * Bootstrap v5.0.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t()}(this,(function(){"use strict";const e="transitionend",t=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t},i=e=>{const i=t(e);return i&&document.querySelector(i)?i:null},s=e=>{const i=t(e);return i?document.querySelector(i):null},n=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const s=Number.parseFloat(t),n=Number.parseFloat(i);return s||n?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0},r=e=>(e[0]||e).nodeType,o=(t,i)=>{let s=!1;const n=i+5;t.addEventListener(e,(function i(){s=!0,t.removeEventListener(e,i)})),setTimeout((()=>{s||(t=>{t.dispatchEvent(new Event(e))})(t)}),n)},a=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},l=new Map;var c={set(e,t,i){l.has(e)||l.set(e,new Map);const s=l.get(e);s.has(t)||0===s.size?s.set(t,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,t)=>l.has(e)&&l.get(e).get(t)||null,remove(e,t){if(!l.has(e))return;const i=l.get(e);i.delete(t),0===i.size&&l.delete(e)}};const d=/[^.]*(?=\..*)\.|.*/,u=/\..*/,g=/::\d+$/,h={};let p=1;const m={mouseenter:"mouseover",mouseleave:"mouseout"},E=/^(mouseenter|mouseleave)/i,f=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function v(e,t){return t&&`${t}::${p++}`||e.uidEvent||p++}function S(e){const t=v(e);return e.uidEvent=t,h[t]=h[t]||{},h[t]}function b(e,t,i=null){const s=Object.keys(e);for(let n=0,r=s.length;n<r;n++){const r=e[s[n]];if(r.originalHandler===t&&r.delegationSelector===i)return r}return null}function C(e,t,i){const s="string"==typeof t,n=s?i:t;let r=U(e);return f.has(r)||(r=e),[s,n,r]}function y(e,t,i,s,n){if("string"!=typeof t||!e)return;if(i||(i=s,s=null),E.test(t)){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};s?s=e(s):i=e(i)}const[r,o,a]=C(t,i,s),l=S(e),c=l[a]||(l[a]={}),u=b(c,o,r?i:null);if(u)return void(u.oneOff=u.oneOff&&n);const g=v(o,t.replace(d,"")),h=r?function(e,t,i){return function s(n){const r=e.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(let a=r.length;a--;)if(r[a]===o)return n.delegateTarget=o,s.oneOff&&O.off(e,n.type,t,i),i.apply(o,[n]);return null}}(e,i,s):function(e,t){return function i(s){return s.delegateTarget=e,i.oneOff&&O.off(e,s.type,t),t.apply(e,[s])}}(e,i);h.delegationSelector=r?i:null,h.originalHandler=o,h.oneOff=n,h.uidEvent=g,c[g]=h,e.addEventListener(a,h,r)}function x(e,t,i,s,n){const r=b(t[i],s,n);r&&(e.removeEventListener(i,r,Boolean(n)),delete t[i][r.uidEvent])}function U(e){return e=e.replace(u,""),m[e]||e}const O={on(e,t,i,s){y(e,t,i,s,!1)},one(e,t,i,s){y(e,t,i,s,!0)},off(e,t,i,s){if("string"!=typeof t||!e)return;const[n,r,o]=C(t,i,s),a=o!==t,l=S(e),c=t.startsWith(".");if(void 0!==r){if(!l||!l[o])return;return void x(e,l,o,r,n?i:null)}c&&Object.keys(l).forEach((i=>{!function(e,t,i,s){const n=t[i]||{};Object.keys(n).forEach((r=>{if(r.includes(s)){const s=n[r];x(e,t,i,s.originalHandler,s.delegationSelector)}}))}(e,l,i,t.slice(1))}));const d=l[o]||{};Object.keys(d).forEach((i=>{const s=i.replace(g,"");if(!a||t.includes(s)){const t=d[i];x(e,l,o,t.originalHandler,t.delegationSelector)}}))},trigger(e,t,i){if("string"!=typeof t||!e)return null;const s=a(),n=U(t),r=t!==n,o=f.has(n);let l,c=!0,d=!0,u=!1,g=null;return r&&s&&(l=s.Event(t,i),s(e).trigger(l),c=!l.isPropagationStopped(),d=!l.isImmediatePropagationStopped(),u=l.isDefaultPrevented()),o?(g=document.createEvent("HTMLEvents"),g.initEvent(n,c,!0)):g=new CustomEvent(t,{bubbles:c,cancelable:!0}),void 0!==i&&Object.keys(i).forEach((e=>{Object.defineProperty(g,e,{get:()=>i[e]})})),u&&g.preventDefault(),d&&e.dispatchEvent(g),g.defaultPrevented&&void 0!==l&&l.preventDefault(),g}};function w(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function I(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const L={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${I(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${I(t)}`)},getDataAttributes(e){if(!e)return{};const t={};return Object.keys(e.dataset).filter((e=>e.startsWith("bs"))).forEach((i=>{let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=w(e.dataset[i])})),t},getDataAttribute:(e,t)=>w(e.getAttribute(`data-bs-${I(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position:e=>({top:e.offsetTop,left:e.offsetLeft})},T={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const i=[];let s=e.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE&&3!==s.nodeType;)s.matches(t)&&i.push(s),s=s.parentNode;return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]}},A="collapse",H="bs.collapse",_={toggle:!0,parent:""},P={toggle:"boolean",parent:"(string|element)"},k="show",D="collapse",$="collapsing",q="collapsed",M="width",R='[data-bs-toggle="collapse"]';class j extends class{constructor(e){(e="string"==typeof e?document.querySelector(e):e)&&(this._element=e,c.set(this._element,this.constructor.DATA_KEY,this))}dispose(){c.remove(this._element,this.constructor.DATA_KEY),O.off(this._element,`.${this.constructor.DATA_KEY}`),this._element=null}static getInstance(e){return c.get(e,this.DATA_KEY)}static get VERSION(){return"5.0.0"}}{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=T.find(`${R}[href="#${this._element.id}"],${R}[data-bs-target="#${this._element.id}"]`);const s=T.find(R);for(let e=0,t=s.length;e<t;e++){const t=s[e],n=i(t),r=T.find(n).filter((e=>e===this._element));null!==n&&r.length&&(this._selector=n,this._triggerArray.push(t))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return _}static get DATA_KEY(){return H}toggle(){this._element.classList.contains(k)?this.hide():this.show()}show(){if(this._isTransitioning||this._element.classList.contains(k))return;let e,t;this._parent&&(e=T.find(".show, .collapsing",this._parent).filter((e=>"string"==typeof this._config.parent?e.getAttribute("data-bs-parent")===this._config.parent:e.classList.contains(D))),0===e.length&&(e=null));const i=T.findOne(this._selector);if(e){const s=e.find((e=>i!==e));if(t=s?c.get(s,H):null,t&&t._isTransitioning)return}if(O.trigger(this._element,"show.bs.collapse").defaultPrevented)return;e&&e.forEach((e=>{i!==e&&j.collapseInterface(e,"hide"),t||c.set(e,H,null)}));const s=this._getDimension();this._element.classList.remove(D),this._element.classList.add($),this._element.style[s]=0,this._triggerArray.length&&this._triggerArray.forEach((e=>{e.classList.remove(q),e.setAttribute("aria-expanded",!0)})),this.setTransitioning(!0);const r=`scroll${s[0].toUpperCase()+s.slice(1)}`,a=n(this._element);O.one(this._element,"transitionend",(()=>{this._element.classList.remove($),this._element.classList.add(D,k),this._element.style[s]="",this.setTransitioning(!1),O.trigger(this._element,"shown.bs.collapse")})),o(this._element,a),this._element.style[s]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._element.classList.contains(k))return;if(O.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,this._element.offsetHeight,this._element.classList.add($),this._element.classList.remove(D,k);const t=this._triggerArray.length;if(t>0)for(let e=0;e<t;e++){const t=this._triggerArray[e],i=s(t);i&&!i.classList.contains(k)&&(t.classList.add(q),t.setAttribute("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[e]="";const i=n(this._element);O.one(this._element,"transitionend",(()=>{this.setTransitioning(!1),this._element.classList.remove($),this._element.classList.add(D),O.trigger(this._element,"hidden.bs.collapse")})),o(this._element,i)}setTransitioning(e){this._isTransitioning=e}dispose(){super.dispose(),this._config=null,this._parent=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(e){return(e={..._,...e}).toggle=Boolean(e.toggle),((e,t,i)=>{Object.keys(i).forEach((s=>{const n=i[s],o=t[s],a=o&&r(o)?"element":null==(l=o)?`${l}`:{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase();var l;if(!new RegExp(n).test(a))throw new TypeError(`${e.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${n}".`)}))})(A,e,P),e}_getDimension(){return this._element.classList.contains(M)?M:"height"}_getParent(){let{parent:e}=this._config;r(e)?void 0===e.jquery&&void 0===e[0]||(e=e[0]):e=T.findOne(e);const t=`${R}[data-bs-parent="${e}"]`;return T.find(t,e).forEach((e=>{const t=s(e);this._addAriaAndCollapsedClass(t,[e])})),e}_addAriaAndCollapsedClass(e,t){if(!e||!t.length)return;const i=e.classList.contains(k);t.forEach((e=>{i?e.classList.remove(q):e.classList.add(q),e.setAttribute("aria-expanded",i)}))}static collapseInterface(e,t){let i=c.get(e,H);const s={..._,...L.getDataAttributes(e),..."object"==typeof t&&t?t:{}};if(!i&&s.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(s.toggle=!1),i||(i=new j(e,s)),"string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t]()}}static jQueryInterface(e){return this.each((function(){j.collapseInterface(this,e)}))}}var N,F,B;return O.on(document,"click.bs.collapse.data-api",R,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=L.getDataAttributes(this),s=i(this);T.find(s).forEach((e=>{const i=c.get(e,H);let s;i?(null===i._parent&&"string"==typeof t.parent&&(i._config.parent=t.parent,i._parent=i._getParent()),s="toggle"):s=t,j.collapseInterface(e,s)}))})),N=A,F=j,B=()=>{const e=a();if(e){const t=e.fn[N];e.fn[N]=F.jQueryInterface,e.fn[N].Constructor=F,e.fn[N].noConflict=()=>(e.fn[N]=t,F.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",B):B(),{Collapse:j}})),function(e){e.BrowserUtils=class{static onWindowLoad(e){"complete"===document.readyState?e():window.addEventListener("load",e)}static onDocumentReady(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}}}(Utils||(Utils={})),function(e){e.CookieUtils=class{static getCookie(e){let t=e+"=",i=decodeURIComponent(document.cookie).split(";");for(var s=0;s<i.length;s++){let e=i[s];for(;" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(t))return e.substring(t.length,e.length)}}static setCookie(e,t,i,s="/"){let n=new Date(Date.now()+24*i*60*60*1e3).toUTCString();document.cookie=`${e}=${encodeURIComponent(t)}; expires=${n}; path=${s}; SameSite=none; Secure`}}}(Utils||(Utils={})),function(e){e.EventUtils=class{static triggerEvent(e,t){let i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!1),e.dispatchEvent(i)}static triggerCustomEvent(e,t,i){var s;window.CustomEvent&&"function"==typeof window.CustomEvent?s=new CustomEvent(t,{detail:i}):(s=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(s)}static oneTimeEvent(e,t,i){let s=function(n){e.removeEventListener(t,s),i(n)};e.addEventListener(t,s)}}}(Utils||(Utils={})),function(e){e.ImageResize=class{constructor(t){this.triggerImageChangedEvent=()=>{e.EventUtils.triggerCustomEvent(this.image,"imageChanged")},this.image=document.querySelector(t),this.imageContainer=this.image.parentNode}resizeImageToFitContainer(){this.setImageVisible(!1),this.image.height=this.calcImageHeightToFitContainer(this.image.naturalWidth,this.image.naturalHeight),this.setImageVisible(!0)}setNewImageToFitContainer(t,i,s){let n=this.calcImageHeightToFitContainer(t,i);this.triggerImageChangingEvent(),this.setImageVisible(!1),e.EventUtils.oneTimeEvent(this.image,"load",this.triggerImageChangedEvent),this.image.height=n,this.image.src=s,this.setImageVisible(!0)}triggerImageChangingEvent(){e.EventUtils.triggerCustomEvent(this.image,"imageChanging")}calcImageHeightToFitContainer(e,t){let i,s,n=this.getPixelPropValue(this.imageContainer,"padding-left")+this.getPixelPropValue(this.imageContainer,"padding-right"),r=this.imageContainer.clientWidth-n-1,o=r/e,a=this.getPixelPropValue(this.imageContainer,"padding-bottom")+this.getPixelPropValue(this.imageContainer,"padding-top"),l=this.imageContainer.clientHeight-a-1,c=l/t;return(o<1||c<1)&&(i=o<c?e/r:t/l),s=i?t/i:t,s}getPixelPropValue(e,t){return parseFloat(getComputedStyle(e)[t].replace("px",""))}setImageVisible(e){e?this.image.classList.remove("d-none"):this.image.classList.add("d-none")}}}(Utils||(Utils={})),function(e){e.HtmlUtils=class{static getAriaLabeledBy(e){return e.getAttribute("aria-labelledby").split(" ")}static getIdSelector(e){return`#${e}`}static displayElement(e,t,i){const s="d-none";let n=document.querySelector(e);i?(t&&n.classList.add(t),n.classList.remove(s)):(n.classList.add(s),t&&n.classList.remove(t))}static displayElementDefault(t,i){e.HtmlUtils.displayElement(t,void 0,i)}static displayElementBlock(t,i){e.HtmlUtils.displayElement(t,"d-block",i)}static displayElementFlex(t,i){e.HtmlUtils.displayElement(t,"d-flex",i)}static isInputChecked(e){return e.checked}static closestWithClass(e,t,i){if(i&&e.classList.contains(t))return e;let s=e;for(;(s=s.parentNode)&&(!s.classList||!s.classList.contains(t)););return s}static each(e,t){let i=document.querySelectorAll(e);Array.prototype.forEach.call(i,(function(e){t(e)}))}static empty(e){e.textContent=""}}}(Utils||(Utils={})),function(e){e.StringUtils=class{static isNumber(e){return!isNaN(parseInt(e))}}}(Utils||(Utils={})),function(e){class t{static logEvent(e,i){t.logEventInternal(e,i)}static logError(e,i){t.logEventInternal("Error",e,i)}static logEventInternal(e,i,s){if(!("ga"in window))return;let n=ga.getAll()[0];n&&(s?n.send(t.gaEventParam,e,i,s):n.send(t.gaEventParam,e,i))}}t.gaEventParam="event",e.GAEventLogger=t}(Utils||(Utils={})),function(e){e.GAJsErrorLogger=class{constructor(t){this.logJsError=(t,i,s,n,r)=>{let o;return o=t.toLowerCase().indexOf("script error")>-1?"Script error":`Message: ${t}; URL: ${i}; Line: ${s}; Column: ${n}; Stack: ${r&&r.stack?r.stack:""};`,e.GAEventLogger.logError(`${this.page}JsError`,o),!1},this.page=t,window.onerror=this.logJsError}}}(Utils||(Utils={})),function(e){e.TranslateService=class{static translate(t,...i){if(languageTranslate&&languageTranslate.hasOwnProperty(t)){let e=languageTranslate[t];if(0===i.length)return e;let s=e;for(let e=0;e<i.length;e++)s=s.replace(`{${e}}`,i[e]);return s}return e.GAEventLogger.logError("Translate",`Untranslated string '${t}'`),t}}}(Utils||(Utils={})),function(Utils){class JSLoader{constructor(url,testObjectName){this.checkScriptParsed=(url,testObjectName,retryDelayMs,retryCount,maxRetries,resolveCallback,rejectCallback)=>{let testObject=eval(this.testObjectName);if(testObject)return void resolveCallback();if(retryCount>maxRetries)return void rejectCallback(new Error(`Script parse timeout: '${url}'`));let that=this;setTimeout((function(){that.checkScriptParsed(url,testObjectName,retryDelayMs,retryCount+1,maxRetries,resolveCallback,rejectCallback)}),retryDelayMs)},this.url=url,this.testObjectName=testObjectName}async loadScript(){let testObject=eval(this.testObjectName);if(testObject)return Promise.resolve();let useCdn=cdnConfig.useCdn,url=useCdn?cdnConfig.cdnPrefix+this.url:this.url,loadFailed=!1,loadScriptPromise=this.loadScriptInternal(url,useCdn,this.testObjectName);try{await loadScriptPromise}catch(e){loadFailed=!0}return loadFailed?this.loadScriptInternal(this.url,!1,this.testObjectName):Promise.resolve()}loadScriptInternal(e,t,i){return new Promise(((s,n)=>{let r=document.createElement("script");r.onload=()=>this.checkScriptParsed(e,i,25,1,200,s,n),r.onerror=()=>n(new Error(`Script load error: '${e}'`)),t&&(r.crossOrigin="anonymous"),r.src=e,document.body.appendChild(r)}))}}Utils.JSLoader=JSLoader}(Utils||(Utils={})),function(e){e.EditOperationRedirectResult=class{}}(EditOperations||(EditOperations={})),function(e){e.EditOperationErrorResult=class{}}(EditOperations||(EditOperations={})),function(e){e.EditOperationSuccessResult=class{}}(EditOperations||(EditOperations={})),function(e){class t{constructor(e,t,i,s){this.operationId=e,this.operationTriggerSelector=t,this.statusContainerSelector=i,this.apiEndpoint=s}setProgressMediator(e){this.progressMediator=e}setImageResizer(e){this.imgResizer=e}init(){Utils.BrowserUtils.onDocumentReady((()=>{document.querySelector(this.operationTriggerSelector).addEventListener("click",(e=>{this.handleOperationTriggerClick(e.target)}));let e=document.querySelector(t.EditPanelSelector);e&&(e.addEventListener("imageOperationStartEvent",(e=>{let t=e.detail.operationId;this.handleImageOperationStartEvent(t)})),e.addEventListener("imageOperationCompleteEvent",(e=>{let t=e.detail.operationId,i=e.detail.successResult;this.handleImageOperationCompleteEvent(t,i)})))}))}handleOperationTriggerClick(e){if(!this.permitOperation())return;this.initOperation();let i=this.gatherOperationParams(),s=document.querySelector(t.CultureHdnSelector).value;i.culture=s;let n=this.validateData(i);if(n)return this.hideCurrentStatus(),void this.setError(n);Utils.Ajax.post(this.apiEndpoint,i,void 0,(e=>{this.handleOperationResult(e)}),(e=>{this.handleOperationFail(e)})),this.hideCurrentStatus(),this.triggerImageOperationStartEvent(),Utils.GAEventLogger.logEvent(t.EditOperationGACategory,this.operationId)}permitOperation(){return!0}initOperation(){}validateData(e){}getImage(){return document.querySelector(t.EditPanelSelector)}handleOperationResult(e){let i=e.redirectUrl;if(void 0!==i){let e=document.querySelector(t.UrlCultureHdnSelector);if(e){let t="/"+e.value;0!=i.indexOf(t)&&(i=t+i)}return void window.location.replace(i)}let s=e.errorMessage;if(null!=s)return this.triggerImageOperationCompleteEvent(void 0),void this.setError(s);let n=e;this.setCurrentImageInfo(n)}setCurrentImageInfo(e){let i=this.getImage(),s=new Image;s.addEventListener("load",(()=>{this.imgResizer.setNewImageToFitContainer(s.naturalWidth,s.naturalHeight,e.currentImagePreviewLink),this.triggerImageOperationCompleteEvent(e)})),s.addEventListener("error",(()=>{i.src=s.src,this.triggerImageOperationCompleteEvent(e)})),s.src=e.currentImagePreviewLink,s.complete&&Utils.EventUtils.triggerEvent(s,"load"),document.querySelector(t.CurrentImageDimensionSelector).textContent=e.currentImageSizeFormatted.toString(),document.querySelector(t.CurrentImageWeightSelector).textContent=e.currentImageLengthFormatted.toString(),document.querySelector(t.CurrentImageFormatSelector).textContent=e.currentImageFormat.toUpperCase(),document.querySelector(t.WidthToHeightHdnSelector).value=e.currentImageWidthToHeightRatio.toString(),document.querySelector(t.WidthHdnSelector).value=e.currentImageWidth.toString(),document.querySelector(t.HeightHdnSelector).value=e.currentImageHeight.toString()}handleOperationFail(e){this.triggerImageOperationCompleteEvent(void 0),this.setError(Utils.TranslateService.translate("Error_ServiceUnavailable")),Utils.GAEventLogger.logError("Edit",`Response status: ${e.status}`)}setError(e){let i=document.querySelector(t.ErrorMessageTemplateSelector).cloneNode(!0);i.id="operationError",i.textContent=e,i.classList.remove("d-none"),document.querySelector(this.statusContainerSelector).appendChild(i),Utils.HtmlUtils.displayElementFlex(this.statusContainerSelector,!0)}triggerImageOperationStartEvent(){Utils.EventUtils.triggerCustomEvent(document.querySelector(t.EditPanelSelector),"imageOperationStartEvent",{operationId:this.operationId})}triggerImageOperationCompleteEvent(e){Utils.EventUtils.triggerCustomEvent(document.querySelector(t.EditPanelSelector),"imageOperationCompleteEvent",{operationId:this.operationId,successResult:e})}handleImageOperationStartEvent(e){this.operationId===e&&(this.setControlsEnabled(!0),this.setOperationProgress(!0),this.progressMediator.signalOperationProgressStart())}handleImageOperationCompleteEvent(e,t){this.operationId===e&&(this.setOperationProgress(!1),this.setControlsEnabled(!1),this.progressMediator.signalOperationProgressComplete())}hideCurrentStatus(){Utils.HtmlUtils.displayElementFlex(this.statusContainerSelector,!1),Utils.HtmlUtils.empty(document.querySelector(this.statusContainerSelector))}setOperationProgress(e){Utils.HtmlUtils.displayElementDefault(`${this.operationTriggerSelector} > .operation-progress`,e)}setControlsEnabled(e){this.setOperationTriggerEnabled(!e),this.setControlButtonsEnabled(!e)}setOperationTriggerEnabled(e){this.setHtmlInputsEnabled(document.querySelector(this.operationTriggerSelector),e)}setHtmlInputsEnabled(e,t){const i="disabled";t?e.removeAttribute(i):e.setAttribute(i,"")}setControlButtonsEnabled(e){Utils.HtmlUtils.each(t.ControlButtonsSelector,(t=>{this.setHtmlDisabledClass(t,e),this.setAriaDisabledAttr(t,e)}))}setHtmlDisabledClass(e,t){const i="disabled";t?e.classList.remove(i):e.classList.add(i)}setAriaDisabledAttr(e,t){const i="aria-disabled";t?e.setAttribute(i,"false"):e.setAttribute(i,"true")}}t.EditOperationGACategory="Edit",t.MaxSizeHdnSelector="#maxSizeHdn",t.MaxResolutionHdnSelector="#maxResolutionHdn",t.WidthHdnSelector="#widthHdn",t.HeightHdnSelector="#heightHdn",t.WidthToHeightHdnSelector="#wToHRatioHdn",t.CultureHdnSelector="#cultureHdn",t.UrlCultureHdnSelector="#urlCultureHdn",t.EditToolboxSelector="#editToolbox",t.EditPanelSelector="#editPanel",t.OperationProgressSelector="#operationProgress",t.ErrorMessageTemplateSelector="#editErrorMessage",t.ControlButtonsSelector="#uploadNewBtn, #revertBtn, #downloadBtn",t.CurrentImageDimensionSelector="#currentImageDimension",t.CurrentImageWeightSelector="#currentImageWeight",t.CurrentImageFormatSelector="#currentImageFormat",e.BaseOperation=t}(EditOperations||(EditOperations={})),function(e){(e.Progress||(e.Progress={})).OperationStatus=class{constructor(e){this.operationStatusSelector=e}display(e){Utils.HtmlUtils.displayElementFlex(this.operationStatusSelector,e)}setStatus(e){e?document.querySelector(this.operationStatusSelector).textContent=e:Utils.HtmlUtils.empty(document.querySelector(this.operationStatusSelector))}}}(Edit||(Edit={})),function(e){(e.Progress||(e.Progress={})).OperationProgress=class{constructor(e){this.progressIndicatorSelector=e}display(e){Utils.HtmlUtils.displayElementFlex(this.progressIndicatorSelector,e)}}}(Edit||(Edit={})),function(e){(e.Progress||(e.Progress={})).ProgressMediator=class{constructor(){this.operationProgress=new e.Progress.OperationProgress("#operationProgress"),this.operationStatus=new e.Progress.OperationStatus("#operationStatus"),this.initialLoaderActive=!0,Utils.BrowserUtils.onDocumentReady((()=>{Utils.BrowserUtils.onWindowLoad((()=>{this.operationProgress.display(!1),this.initialLoaderActive=!1}))}))}signalOperationProgressStart(){this.statusCapableOperationActive&&this.operationStatus.display(!1),this.operationProgress.display(!0)}signalOperationProgressComplete(){this.operationProgress.display(!1),this.statusCapableOperationActive&&this.operationStatus.display(!0)}signalOperationStatusStart(){this.initialLoaderActive&&this.operationProgress.display(!1),this.operationStatus.setStatus(void 0),this.operationStatus.display(!0),this.statusCapableOperationActive=!0}signalOperationStatusChanged(e){this.operationStatus.setStatus(e)}signalOperationStatusComplete(){this.operationStatus.display(!1),this.statusCapableOperationActive=!1}}}(Edit||(Edit={})),function(e){class t{static post(e,i,s,n,r,o=!1){let a=i instanceof FormData,l=a?i:t.encodeObject(i);t.postWithRetry(e,l,a,s,n,r,o,!0)}static postWithRetry(i,s,n,r,o,a,l,c){let d=new XMLHttpRequest;d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&(200===d.status?(r&&r(),o(JSON.parse(d.responseText))):l&&c?t.postWithRetry(i,s,n,r,o,a,l,!1):(r&&r(),a(d)))},d.open("POST",i,!0),n||d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");try{d.send(s)}catch(t){e.GAEventLogger.logError("Ajax",`Url:${i}, Error:${t.message}`)}}static encodeObject(e){let t=[],i=/%20/g;for(let s in e){let n=e[s],r=void 0===n?"":n,o=`${encodeURIComponent(s).replace(i,"+")}=${encodeURIComponent(r).replace(i,"+")}`;t.push(o)}return t.join("&")}}e.Ajax=t}(Utils||(Utils={})),Shared||(Shared={}),new class{constructor(){Utils.BrowserUtils.onDocumentReady((function(){let e=document.querySelector("#cookieConsentAccept");e&&e.addEventListener("click",(function(e){document.cookie=e.target.getAttribute("data-cookie-string");let t=document.querySelector("#cookieConsent");t.classList.add("d-none"),t.classList.remove("d-flex")}))}))}},function(e){class t{constructor(){Utils.BrowserUtils.onDocumentReady((function(){t.Menus.forEach((function(e){new i(e)})),i.initHideOnClick(t.Menus)}))}}t.Menus=["#lang","#menu"],e.DropdownMenus=t;class i{constructor(e){document.querySelector(`${e} > .${i.DropdownToggleClass}`).addEventListener("click",(function(s){t.Menus.filter((t=>t!==e)).forEach(i.hideMenu),document.querySelector(`${e} > .${i.DropdownMenuClass}`).classList.toggle(i.ShowDropdownClass),s.preventDefault(),s.stopPropagation()}))}static initHideOnClick(e){window.addEventListener("click",(function(){e.forEach(i.hideMenu)}))}static hideMenu(e){let t=document.querySelector(`${e} > .${i.DropdownMenuClass}`);t.classList.contains(i.ShowDropdownClass)&&t.classList.remove(i.ShowDropdownClass)}}i.DropdownToggleClass="dropdown-toggle",i.DropdownMenuClass="dropdown-menu",i.ShowDropdownClass="show-dropdown"}(Shared||(Shared={})),function(e){(e.Toolbox||(e.Toolbox={})).EditToolboxExpander=class{constructor(){this.expanderHiddenClass="expander-hidden",this.toolboxExpanderSelector="#toolboxExpander",this.toolboxCollapserSelector="#toolboxCollapser",this.toolboxExpanderItemHiddenClass="toolbox-expander-item-hidden",this.toolboxExpanderItemSelector=`${this.toolboxExpanderSelector} ~ .toolbox-expander-item`,this.menuExpanderSelector="#menuExpander",this.menuCollapserSelector="#menuCollapser",this.menuExpanderItemHiddenClass="menu-expander-item-hidden",this.menuExpanderItemSelector=`${this.menuExpanderSelector} ~ .menu-expander-item`,this.expandedCookieName="_texp",this.expandedCookieExpirationDays=183}init(){Utils.HtmlUtils.each(`${this.toolboxExpanderSelector},${this.menuExpanderSelector}`,(e=>e.addEventListener("click",(()=>this.expand())))),Utils.HtmlUtils.each(`${this.toolboxCollapserSelector},${this.menuCollapserSelector}`,(e=>e.addEventListener("click",(()=>this.collapse()))))}expand(){this.expandInternal(this.toolboxExpanderSelector,this.toolboxExpanderItemSelector,this.toolboxExpanderItemHiddenClass,this.toolboxCollapserSelector),this.expandInternal(this.menuExpanderSelector,this.menuExpanderItemSelector,this.menuExpanderItemHiddenClass,this.menuCollapserSelector),Utils.CookieUtils.setCookie(this.expandedCookieName,"True",this.expandedCookieExpirationDays)}expandInternal(e,t,i,s){document.querySelector(e).classList.add(this.expanderHiddenClass),Utils.HtmlUtils.each(t,(e=>e.classList.remove(i))),document.querySelector(s).classList.remove(this.expanderHiddenClass)}collapse(){this.collapseInternal(this.toolboxExpanderSelector,this.toolboxExpanderItemSelector,this.toolboxExpanderItemHiddenClass,this.toolboxCollapserSelector),this.collapseInternal(this.menuExpanderSelector,this.menuExpanderItemSelector,this.menuExpanderItemHiddenClass,this.menuCollapserSelector),Utils.CookieUtils.setCookie(this.expandedCookieName,"False",this.expandedCookieExpirationDays)}collapseInternal(e,t,i,s){document.querySelector(s).classList.add(this.expanderHiddenClass),Utils.HtmlUtils.each(t,(e=>e.classList.add(i))),document.querySelector(e).classList.remove(this.expanderHiddenClass)}}}(Edit||(Edit={}));class EditPage{constructor(){this.imgSelector="#editPanel",new Utils.GAJsErrorLogger("Edit"),this.hasImage="true"===document.querySelector("#hasImageHdn").value,this.hasImage?(this.imgResizer=new Utils.ImageResize(this.imgSelector),(new EditPanel).init(this.imgResizer),this.initEditToolbox(this.imgSelector),this.progressMediator=new Edit.Progress.ProgressMediator):this.initEditToolbox(this.imgSelector),new Shared.DropdownMenus}initEditToolbox(e){let t=new EditToolbox(e),i=new Edit.Toolbox.EditToolboxExpander;t.init(),i.init()}registerOperation(e){e.setImageResizer(this.imgResizer),e.setProgressMediator(this.progressMediator)}}class EditToolbox{constructor(e){this.editToolboxSelector="#editToolbox",this.toolboxChangedTriggered=!1,this.triggerSelectedToolboxChangedEventOnLoad=async e=>{let t=document.querySelector("#editToolbox .toolbox-panel.collapse.show"),i=t?t.getAttribute("data-toolboxid"):void 0;if(i||!e)await this.loadOperationJs(i),this.triggerSelectedToolboxChangedEvent(i);else{let e=this;setTimeout((function(){e.triggerSelectedToolboxChangedEventOnLoad(!1)}),500)}},this.editPanelSelector=e}init(){Utils.BrowserUtils.onDocumentReady((()=>{document.querySelector("#editMenu").addEventListener("click",(e=>{this.imageEditingActive||this.handleEditMenuClick(e.target)}));let e=function(e){e.preventDefault()};Utils.HtmlUtils.each("#editMenu a.toolbox-nav-link",(function(t){t.addEventListener("click",e)}));let t=e=>{this.imageEditingActive||this.expandCollapsed(e.currentTarget)};Utils.HtmlUtils.each("#editToolbox div.toolbox-item",(function(e){e.addEventListener("click",t)}));let i=e=>{let t=e.currentTarget;this.setParentToolboxVisible(t,"toolbox",!0),this.setExpanderAriaExpandedAttr(t,!1)},s=e=>{let t=e.currentTarget;this.setParentToolboxVisible(t,"toolbox",!1),this.setActiveEditMenuItem(t),this.setExpanderAriaExpandedAttr(t,!0)};Utils.HtmlUtils.each("#editToolbox .toolbox-panel",(function(e){e.addEventListener("hide.bs.collapse",i),e.addEventListener("show.bs.collapse",s)}));let n=()=>{this.toolboxChangedTriggered||(this.triggerSelectedToolboxChangedEventOnLoad(!0),this.toolboxChangedTriggered=!0)},r=document.querySelector(this.editPanelSelector);r&&(r.addEventListener("imageOperationStartEvent",(()=>{this.imageEditingActive=!0})),r.addEventListener("imageOperationCompleteEvent",(()=>{this.imageEditingActive=!1})),r.complete?n():Utils.EventUtils.oneTimeEvent(r,"load",n)),Utils.BrowserUtils.onWindowLoad(n)}))}handleEditMenuClick(e){let t=Utils.HtmlUtils.closestWithClass(e,"edit-menu-nav",!0);t&&this.expandCollapsed(t)}async expandCollapsed(e){let t=document.querySelector(Utils.HtmlUtils.getIdSelector(e.getAttribute("aria-controls")));if(!t.classList.contains("collapse")||!t.classList.contains("show")){new bootstrap.Collapse(t,{toggle:!1,parent:"#editToolbox"}).show();let e=t.getAttribute("data-toolboxid");await this.loadOperationJs(e),this.triggerSelectedToolboxChangedEvent(e)}}async loadOperationJs(e){let t=scriptConfig.scripts.find((t=>t.id===e)),i=scriptConfig.basePath+t.path+"?v="+scriptConfig.version,s=new Utils.JSLoader(i,t.fallbackObj);try{await s.loadScript()}catch(t){Utils.GAEventLogger.logError(`Load${e}Js`,t.message)}return Promise.resolve()}triggerSelectedToolboxChangedEvent(e){Utils.EventUtils.triggerCustomEvent(document.querySelector(this.editToolboxSelector),"selectedToolboxChanged",{toolboxId:e})}setActiveEditMenuItem(e){let t=Utils.HtmlUtils.getAriaLabeledBy(e).filter((function(e){return!!document.querySelector(Utils.HtmlUtils.getIdSelector(e)).classList.contains("edit-menu-nav")})).shift();document.querySelector("#editMenu a.toolbox-nav-link.active").classList.remove("active"),document.querySelector(Utils.HtmlUtils.getIdSelector(t)).classList.add("active")}setExpanderAriaExpandedAttr(e,t){Utils.HtmlUtils.getAriaLabeledBy(e).forEach((function(e){document.querySelector(Utils.HtmlUtils.getIdSelector(e)).setAttribute("aria-expanded",t.toString())}))}setParentToolboxVisible(e,t,i){let s="d-block",n="d-sm-none",r=Utils.HtmlUtils.closestWithClass(e,t,!1).classList;i?(r.add(s,n),r.contains(n)||r.add(n)):(r.remove(s,n),r.contains(n)&&r.remove(n))}}class EditPanel{constructor(){this.resizeHanlderRegistered=!1}init(e){let t=()=>{this.resizeHanlderRegistered||(window.addEventListener("resize",(function(){e.resizeImageToFitContainer()})),this.resizeHanlderRegistered=!0,e.resizeImageToFitContainer())};Utils.BrowserUtils.onDocumentReady((function(){let i=e.image;i.complete?t():(Utils.EventUtils.oneTimeEvent(i,"load",t),Utils.EventUtils.oneTimeEvent(i,"error",t))}))}}let editPage=new EditPage;